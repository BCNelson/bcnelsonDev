---
import StatusIndicator from "./ui/StatusIndicator.astro";

const navLinks = [
  { href: "/", label: "/root" },
  { href: "/projects", label: "/projects" },
  { href: "/blog", label: "/blog" },
  { href: "/contact", label: "/connect" },
];

const currentPath = Astro.url.pathname;
---

<header
  class="fixed top-0 left-0 right-0 z-50 bg-surface-primary/80 backdrop-blur-nav border-b border-border"
>
  <nav class="container mx-auto px-4 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Logo -->
      <a
        href="/"
        class="flex items-center gap-2 font-mono text-lg text-slate-100 hover:text-accent-cyan transition-colors"
      >
        <span class="text-accent-cyan">{">"}</span>
        <span class="font-semibold">BCNELSON.DEV</span>
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center gap-8">
        <ul class="flex items-center gap-6">
          {
            navLinks.map((link) => {
              const isActive =
                currentPath === link.href ||
                (link.href !== "/" && currentPath.startsWith(link.href));
              return (
                <li>
                  <a
                    href={link.href}
                    class={`font-mono text-sm transition-colors ${
                      isActive
                        ? "text-accent-cyan"
                        : "text-slate-400 hover:text-slate-100"
                    }`}
                  >
                    {link.label}
                  </a>
                </li>
              );
            })
          }
        </ul>
        <StatusIndicator />
      </div>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-btn"
        class="md:hidden p-2 text-slate-400 hover:text-slate-100"
        aria-label="Toggle menu"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <div
      id="mobile-menu"
      class="hidden md:hidden border-t border-border py-4 space-y-2"
    >
      {
        navLinks.map((link) => {
          const isActive =
            currentPath === link.href ||
            (link.href !== "/" && currentPath.startsWith(link.href));
          return (
            <a
              href={link.href}
              class={`block font-mono text-sm py-2 transition-colors ${
                isActive
                  ? "text-accent-cyan"
                  : "text-slate-400 hover:text-slate-100"
              }`}
            >
              {link.label}
            </a>
          );
        })
      }
      <div class="pt-2">
        <StatusIndicator />
      </div>
    </div>
  </nav>
</header>

<script>
  const mobileMenuBtn = document.getElementById("mobile-menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");

  mobileMenuBtn?.addEventListener("click", () => {
    mobileMenu?.classList.toggle("hidden");
  });
</script>
