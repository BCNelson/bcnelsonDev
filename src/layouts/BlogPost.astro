---
import BaseLayout from "./BaseLayout.astro";
import type { CollectionEntry } from "astro:content";

type Props = CollectionEntry<"blog">["data"];

const { title, description, pubDate, updatedDate, heroImage, tldr } = Astro.props;
---

<BaseLayout title={title} description={description}>
  <article class="max-w-3xl mx-auto mt-12 mb-16">
    <div class="mb-8">
      {heroImage && (
        <img
          class="w-full rounded-lg shadow-lg mb-4"
          src={heroImage}
          alt={title}
        />
      )}
      <h1 class="text-4xl font-bold text-white mb-2">{title}</h1>
      <div class="text-gray-400">
        <time datetime={pubDate.toISOString()}>
          {pubDate.toLocaleDateString("en-US", {
            year: "numeric",
            month: "long",
            day: "numeric",
          })}
        </time>
        {updatedDate && (
          <span>
            {" "}(Updated:{" "}
            <time datetime={updatedDate.toISOString()}>
              {updatedDate.toLocaleDateString("en-US", {
                year: "numeric",
                month: "long",
                day: "numeric",
              })}
            </time>)
          </span>
        )}
      </div>
    </div>
    {tldr && tldr.length > 0 && (
      <details class="mb-8 border border-gray-700 rounded-lg">
        <summary class="px-4 py-3 cursor-pointer text-gray-300 hover:text-white font-medium">
          TL;DR
        </summary>
        <ul class="px-4 pb-4 pt-2 text-gray-300 list-disc list-inside space-y-1">
          {tldr.map((item) => (
            <li>{item}</li>
          ))}
        </ul>
      </details>
    )}
    <div class="prose prose-lg prose-invert max-w-none">
      <slot />
    </div>
  </article>
</BaseLayout>
